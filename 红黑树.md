# 五个条件

1、每个节点非黑即红

2、根节点是黑色

3、叶节点（NIL）是黑色

4、如果一个节点是红色，则它的两个子节点都是黑色的

5、从根节点出发到所有叶节点的路径上，黑色节点树相同



## ps:

​	红黑树靠树高和调整颜色作为平衡条件，红黑数是条件更加松散的AVL数。

AVL树一定能被涂成红黑数。

​	红黑数，两个子树相差不超过2倍，就不用旋转，所以相对AVL树，旋转的次数会少很多，旋转耗时会很大，因为树的两个节点大概率不是连续的，所以旋转会触发CPU的随即访问，对CPU的性能有很大损耗。



# 调整策略

1、插入调整站在**祖父节点**看

2、删除调整站在**父节点**看

3、插入和删除的情况处理一共五种



## 插入从祖父节点往下看



为了减少插入节点对红黑树的影响，插入的节点都是红色



黑红红 	<-->	 红黑黑 是等价的，转换过程并没有改变每条叶节点到根节点路径上的黑色节点数 



插入调整 = 插入之后的调整



插入调整两类：根据叔父的颜色分两类

### 情况一

叔父为红色，红上顶

![image-20200516120119054](/home/zhangzhiguo/文档/红黑树.assets/image-20200516120119054.png)

### 情况二

叔父为黑色（四种情况），此情况为左子树为红色，左子树的作字数也为红色-->LL型，所以大右旋，然后旋转后需要考虑 使得每棵字数上面的黑色节点树不变

![image-20200516110212974](/home/zhangzhiguo/文档/红黑树.assets/image-20200516110212974.png)

然后可以红上顶（即红黑黑）或者红下沉（黑红红），把图放在整棵树中去看，不要把它单独看成一棵树，然后去推倒哪些点颜色是确定的，那些是不确定的，用确定的情况去对应确定的操作。



其余情况均可调整成为情况二可处的情况，所以就不单独讨论了。



## 删除从父亲节点往下看	



​	删除度为0的黑色叶子节点(NIL)， 把代删除节点替换为NIL节点，形成双重黑节点。

​	删除度为1的节点，有可能产生双重黑节点

![image-20200514200338574](/home/zhangzhiguo/.config/Typora/typora-user-images/image-20200514200338574.png)



​	删除调整的目标，干掉双重黑节点，带有双重黑的红黑树一定是不平衡的



### 情况一

使双重黑的标记往上浮，浮到根结点时把它干掉

![image-20200516120853424](/home/zhangzhiguo/文档/红黑树.assets/image-20200516120853424.png)

![image-20200516111720855](/home/zhangzhiguo/文档/红黑树.assets/image-20200516111720855.png)



### 情况二

LR类型，最后会转化为情况三

![image-20200516113844914](/home/zhangzhiguo/文档/红黑树.assets/image-20200516113844914.png)





### 情况三

![image-20200514202013249](/home/zhangzhiguo/.config/Typora/typora-user-images/image-20200514202013249.png)



总结：RR类型，兄弟节点在右子树并且兄弟节点的右子树是红色

![image-20200516113256422](/home/zhangzhiguo/文档/红黑树.assets/image-20200516113256422.png)

![image-20200514202537802](/home/zhangzhiguo/.config/Typora/typora-user-images/image-20200514202537802.png)

上面的三元组，下面两个变成黑色，顶上的不变





红色上顶 黑色在增加， 插入对红色操作

双重黑往上顶 黑色减少， 删除对黑色操作



### 情况四

兄弟节点为红色的情况，可以转化为兄弟节点为黑色的情况

![image-20200516114320716](/home/zhangzhiguo/文档/红黑树.assets/image-20200516114320716.png)